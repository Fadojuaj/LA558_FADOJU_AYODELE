setwd("C:/Users/USER/Documents/GitHub/LA558_FADOJU_AYODELE/Assignment_4")
setwd("C:/Users/USER/Documents/GitHub/LA558_FADOJU_AYODELE/Assignment_4")
install.packages("leaflet", "leaflet.providers", "tidyverse", "sf")
install.packages("leaflet", "leaflet.providers", "tidyverse", "sf")
library(leaflet)
library(leaflet.providers)
library(tidyverse)
library(readx
install.packages("leaflet", "leaflet.providers", "tidyverse", "sf")
install.packages("leaflet", "leaflet.providers", "tidyverse", "sf")
install.packages("leaflet", "leaflet.providers", "tidyverse", "sf")
install.packages("leaflet", "leaflet.providers", "tidyverse", "sf")
library(leaflet)
library(leaflet.providers)
library(tidyverse)
library(readxl)
library(sf)
Sec_HospitalCount <- st_read("NGA_Secondary_Hospitals.shp")
setwd("~/GitHub/LA558_2023/lecture/8ab")
setwd("~/GitHub/LA558_2023/lecture/8ab")
setwd("C:/Users/USER/Documents/GitHub/LA558_FADOJU_AYODELE/Assignment_4")
setwd("~/GitHub/LA558_FADOJU_AYODELE/Assignment_4")
install.packages("leaflet", "leaflet.providers", "tidyverse", "sf")
library(leaflet)
library(leaflet.providers)
library(tidyverse)
library(readxl)
library(sf)
Sec_Hospital <- st_read("NGA_Secondary_Hospitals.shp")
Sec_Hospital <- st_read("NGA_Secondary_Hospitals.shp")
View(Sec_Hospital)
View(Sec_Hospital)
Sec_Hospital <- Sec_Hospital %>% rename(Hosp_count = ID_1_count_)
Sec_Hospital <- Sec_Hospital %>% rename(Hosp_count = ID_1_count)
View(Sec_Hospital)
m <- leaflet() %>%
setView(-94.5, 42.2, 6)  %>%
addTiles() %>%
addPolygons(data = Sec_Hospital,  # borders of all counties
color = "red", fill = NA, weight = 1)
m
m <- leaflet() %>%
setView(7.49, 9.08, zoom = 6)  # set to Nigeria's coordinates
addTiles() %>%
addPolygons(data = Sec_Hospital,  # borders of all counties
color = "red", fill = NA, weight = 1)
st_is_longlat()
m <- leaflet() %>%
setView(7.49, 9.08, zoom = 6)  # set to Nigeria's coordinates
addTiles() %>%
addPolygons(data = Sec_Hospital,  # borders of all counties
color = "red", fill = NA, weight = 1)
View(Sec_Hospital)
m <- leaflet() %>%
setView(7.49, 9.08, zoom = 6)  # set to Nigeria's coordinates
%>% addTiles() %>%
m <- leaflet() %>%
setView(7.49, 9.08, zoom = 6)  # set to Nigeria's coordinates
addTiles() %>%
addPolygons(data = Sec_Hospital,  # borders of all counties
color = "red", fill = NA, weight = 1)
library(tmap)
install.packages("tmap")
library(tmap)
# load an example data set
data(World)
# convert to long-lat format
World <- spTransform(World, CRS("+proj=longlat +datum=WGS84"))
m <- leaflet() %>%
setView(7.49, 9.08, zoom = 6)  # set to Nigeria's coordinates
addTiles() %>%
addPolygons(data = Sec_Hospital,  # borders of all counties
color = "red", fill = NA, weight = 1)
m <- leaflet() %>%
setView(-94.5, 42.2, 6)  %>%
addTiles() %>%
addPolygons(data = Sec_Hospital,  # borders of all counties
color = "red", fill = NA, weight = 1)
m
Sec_Hospital <- st_transform(Sec_Hospital, crs = 32632)
m <- leaflet() %>%
setView(8.6753, 9.081999, 7) %>%
addTiles() %>%
addPolygons(data = Sec_Hospital, color = "red", fill = NA, weight = 1)
m
# convert Sec_Hospital to UTM zone 32N (for example)
Sec_Hospital <- st_transform(Sec_Hospital, crs = 32632)
m <- leaflet() %>%
setView(8.6753, 9.081999, 7) %>%
addTiles() %>%
addPolygons(data = Sec_Hospital, color = "red", fill = NA, weight = 1)
m
# convert Sec_Hospital to UTM zone 32N (for example)
Sec_Hospital <- st_transform(Sec_Hospital, crs = 32632)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6) %>%
addTiles() %>%
addPolygons(data = Sec_Hospital, color = "red", fill = NA, weight = 1)
m
st_crs(Sec_Hospital)
Sec_Hospital <- st_transform(Sec_Hospital, crs = 32632)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6) %>%
addTiles() %>%
addPolygons(data = Sec_Hospital, color = "red", fill = NA, weight = 1)
m
m <- leaflet() %>%
setView(8.6753, 9.081999, 6) %>%
addTiles() %>%
addPolygons(data = Sec_Hospital, color = "red", fill = NA, weight = 1)
m
m <- leaflet() %>%
setView(8.6753, 9.081999, 6) %>%
addTiles() %>%
addPolygons(data = Sec_Hospital, color = "red", fill = NA, weight = 2)
m
studentCount_selection2 <- studentCount %>%
filter(is.na(Hosp_count) | !Hosp_count > 0)
HospitalCount_selection2 <- Sec_Hospital %>%
filter(is.na(Hosp_count) | !Hosp_count > 0)
View(World)
View(m)
View(HospitalCount_selection2)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = HospitalCount_selection2,  # borders of all counties
color = "#000", fillColor = "blue", weight = 1,
opacity = 0.75, fillOpacity = 0.8)
m
hospitalCount <- Sec_Hospital %>%
replace(is.na(.), 0)
View(hospitalCount)
library("RColorBrewer")
display.brewer.all()
View(hospitalCount)
bins <- c(0, 5, 10, 15, 20, 25, 30, 35, 40, 45, Inf)
pal <- colorBin("YIOrRd", domain = HospitalCount$Hosp_count, bins = bins)
bins <- c(0, 5, 10, 15, 20, 25, 30, 35, 40, 45, Inf)
pal <- colorBin("YIOrRd", domain = Sec_Hospital$Hosp_count, bins = bins)
bins <- c(0, 5, 10, 15, 20, 25, 30, 35, 40, 45, Inf)
pal <- colorBin("YIOrRd", domain = hospitalCount$Hosp_count, bins = bins)
m <- leaflet() %>%
setView(-94.5, 42.2, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(count),
weight = 0.5,
opacity = 1,
color = "red",
dashArray = "1",
fillOpacity = 0.8)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(count),
weight = 0.5,
opacity = 1,
color = "red",
dashArray = "1",
fillOpacity = 0.8)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(Hosp_count),
weight = 0.5,
opacity = 1,
color = "red",
dashArray = "1",
fillOpacity = 0.8)
m
bins <- c(0, 5, 10, 15, 20, 25, 30, 35, 40, 45, Inf)
pal <- colorBin("PuBu", domain = hospitalCount$Hosp_count, bins = bins)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(Hosp_count),
weight = 0.5,
opacity = 1,
color = "red",
dashArray = "1",
fillOpacity = 0.8)
m
View(hospitalCount)
display.brewer.all()
bins <- c(0, 5, 10, 15, 20, 25, 30, 35, 40, 45, Inf)
pal <- colorBin("PuRd", domain = hospitalCount$Hosp_count, bins = bins)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(Hosp_count),
weight = 0.5,
opacity = 1,
color = "red",
dashArray = "1",
fillOpacity = 0.8)
m
bins <- c(0, 5, 10, 15, 20, 25, 30, 35, Inf)
pal <- colorBin("PuRd", domain = hospitalCount$Hosp_count, bins = bins)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(Hosp_count),
weight = 0.5,
opacity = 1,
color = "red",
dashArray = "1",
fillOpacity = 0.8)
m
# Add interaction
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(Hosp_count),
weight = 0.5,
opacity = 1,
color = "red",
dashArray = "1",
fillOpacity = 0.8,  #be careful, you need to switch the ) to a comma
highlightOptions = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE)
)
m
Sec_Hospital <- Sec_Hospital %>% rename(Hosp_count = ID_1_count)
Sec_Hospital <- Sec_Hospital %>% rename(State = NAME_1)
View(hospitalCount)
hospitalCount <- Sec_Hospital %>%
replace(is.na(.), 0)
View(hospitalCount)
View(hospitalCount)
labels <- sprintf(
"<strong>%s</strong><br/>%g Secondaryhospitals",
hospitalCount$State, hospitalCount$hosp_count
) %>% lapply(htmltools::HTML)
View(labels)
labels <- sprintf(
"<strong>%s</strong><br/>%g Hospital",
hospitalCount$State, hospitalCount$hosp_count
) %>% lapply(htmltools::HTML)
labels <- sprintf(
"<strong>%s</strong><br/>%g hospital",
hospitalCount$State, hospitalCount$hosp_count
) %>% lapply(htmltools::HTML)
View(hospitalCount)
labels <- sprintf(
"<strong>%s</strong><br/>%g hospital",
hospitalCount$State, hospitalCount$Hosp_count
) %>% lapply(htmltools::HTML)
View(labels)
labels <- sprintf(
"<strong>%s</strong><br/>%g Secondary_Hospital",
hospitalCount$State, hospitalCount$Hosp_count
) %>% lapply(htmltools::HTML)
View(labels)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = studentCount,
fillColor = ~pal(count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "1",
fillOpacity = 0.8,  #be careful, you need to switch the ) to a comma
highlightOptions = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "10px",
direction = "auto"))
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(hosp_count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "1",
fillOpacity = 0.8,  #be careful, you need to switch the ) to a comma
highlightOptions = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "10px",
direction = "auto"))
View(hospitalCount)
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(Hosp_count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "1",
fillOpacity = 0.8,  #be careful, you need to switch the ) to a comma
highlightOptions = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "10px",
direction = "auto"))
m
#finally we can add a legend! I will append this to m
m %>% addLegend(pal = pal, values = count, opacity = 0.7, title = "Secondary Hospitals",
position = "bottomright")
m <- leaflet() %>%
setView(8.6753, 9.081999, 6)  %>%
addTiles() %>%
addPolygons(data = hospitalCount,
fillColor = ~pal(Hosp_count),
weight = 0.5,
opacity = 1,
color = "grey",
dashArray = "1",
fillOpacity = 0.8,  #be careful, you need to switch the ) to a comma
highlightOptions = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "10px",
direction = "auto"))
m
#finally we can add a legend! I will append this to m
m %>% addLegend(pal = pal, values = count, opacity = 0.7, title = "Secondary Hospita",
position = "bottomright")
#finally we can add a legend! I will append this to m
m %>% addLegend(pal = pal, values = Hosp_count, opacity = 0.7, title = "Secondary Hospita",
position = "bottomright")
#finally we can add a legend! I will append this to m
m %>% addLegend(pal = pal, values = hosp_count, opacity = 0.7, title = "Secondary Hospital",
position = "bottomright")
#finally we can add a legend! I will append this to m
m %>% addLegend(pal = pal, values = count, opacity = 0.7, title = "Secondary Hospital",
position = "bottomright")
